<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
    <script src="riot.js"></script>
    <style>
      body {
        margin: 0;
        font: menu;
        -webkit-user-select: none;
      }
    </style>
    <link rel="stylesheet" href="typicons/typicons.min.css" />
  </head>
  <body>
    <file-list></file-list>
    <notebook-tabs></notebook-tabs>
    <login-view></login-view>
    <script src="tags.js"></script>
    <script>
      var list = riot.mount("file-list")[0];
      var tabs = riot.mount("notebook-tabs")[0];
      var login = riot.mount("login-view")[0];
      riot.host = undefined;
      riot.openUrl = function (url) {
        if (riot.host === undefined)
          throw "Host hasn't been set."
        
        if (url.slice(0, riot.host.length) == riot.host)
          return tabs.openNotebook(url);
        require("electron").shell.openExternal(url);
      }
      riot.login = function (url, callback) {
        login.login(url, callback);
      }
      riot.newFile = function (type, directory, kernel_name) {
        list.newFile(type, directory, kernel_name);
      }
      
      require("electron").ipcRenderer.on('set-host', function (event, message) {
        riot.host = message;
        list.loadFiles("", riot.host);
      });
      
      window.onbeforeunload = function (event) {
        event.returnValue = tabs.closeAll();
      }
    </script>
  </body>
</html>
